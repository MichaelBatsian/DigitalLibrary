@using Microsoft.AspNet.Identity
@model Godeltech.Mastery.Web.DigitalLibrary.Models.ViewModels.LoginViewModel

@if (!Request.IsAuthenticated)
{
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user menu-icon"></i>Login<span class="caret"></span></a>
        <ul class="dropdown-menu login-dp">
            <li>
                <div class="row">
                    <div class="col-md-12">
                        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl, currentPath = ViewData["Path"] }, FormMethod.Post, new { @class = "form-horizontal", role = "form", id = "login-nav" }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <div class="form-group">
                                @Html.LabelFor(m => m.Email, new { @class = "sr-only" })
                                @Html.TextBoxFor(m => m.Email, new { @type = "email", @class = "form-control", @placeholder = "Email address" })
                                @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(m => m.Password, new { @class = "sr-only" })
                                @Html.TextBoxFor(m => m.Password, new { @class = "form-control", @placeholder = "Password" })
                                @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                                <div class="help-block text-right"><a href="">Forget the password ?</a></div>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block">Sign in</button>
                            </div>
                            <div class="checkbox">
                                <label>
                                    @Html.CheckBoxFor(m => m.RememberMe) keep me logged-in
                                </label>
                            </div>
                        }
                    </div>
                    <div class="bottom text-center" style="color:black;font-weight:300">
                        New here ? @Html.ActionLink("Join Us", "Register", "Account", null, htmlAttributes: new { @style = "color:rgb(50, 118, 177)" })
                    </div>
                </div>
            </li>
        </ul>
    </li>
}
else
{
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hello @User.Identity.GetUserName()!<span class="caret"></span></a>
        <ul class="dropdown-menu login-dp">
            <li>
                <div class="col-md-12">
                    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                    {
                        @Html.AntiForgeryToken()
                        <a href="javascript:document.getElementById('logoutForm').submit()">
                            Log off
                        </a>
                    }
                </div>
            </li>
        </ul>
    </li>
}


